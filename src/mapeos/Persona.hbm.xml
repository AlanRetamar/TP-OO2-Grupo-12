<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping SYSTEM "../hibernate-mapping-3.0.dtd">
<hibernate-mapping>
	<class name="datos.Persona" table="Persona">
		<id column="idPersona" name="idPersona">
			<generator class="identity" />
		</id>
		
		<property name="nombre" column="nombre" type="string" />
		<property name="apellido" column="apellido" type="string" />
		<property name="dni" column="dni" type="int" />
		<property name="fechaDeNacimiento" column="fechaDeNacimiento" type="LocalDate" />
		<property name="email" column="email" type="string" />
		<property name="telefono" column="telefono" type="string" />
		<property name="contraseña" column="contraseña" type="string" />
		<set name="direcciones" table="Persona_has_Direccion" cascade="all">
		    <key column="idPersona"/>
		    <many-to-many class="datos.Direccion" column="idDireccion"/>
		</set>
		
		<joined-subclass name="datos.Empleado" table="Empleado">
			<key column="idEmpleado" />
			<property name="fechaDeIngreso" column="fechaDeIngreso" type="LocalDate" />
			<property column="funcion" name="funcion" type="string" />
			<property column="cuit" name="cuit" type="string" />
			
		    <set name="turnos" cascade="save-update" table="turno" order-by="idTurno asc" inverse="true" lazy="true" fetch="join">
	           <key column="idEmpleado" not-null="true"  />
	           <one-to-many class="datos.Turno" />
	        </set>
		</joined-subclass>
		
		<joined-subclass name="datos.Cliente" table="Cliente">
			<key column="idCliente" />
			<property column="codigo" name="codigo" type="string" />
			
		   <set table="cliente_has_turno" name="historialDeTurnos" outer-join="true" fetch="join">
	         <key column="idCliente"/>
	         <many-to-many column="idTurno" class="datos.Turno"/>
	       </set>
		</joined-subclass>
		
	</class>
</hibernate-mapping>